(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{46642:(e,t,s)=>{Promise.resolve().then(s.bind(s,60116))},60116:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(95155),i=s(12115),r=s(26991),l=s(94632),d=s(68425),c=s(47734),n=s(73697),o=s(23508),x=s(24678),m=s(69386);let h=e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e),p=["#f97316","#fb923c","#fdba74","#fed7aa","#fff7ed","#ea580c","#c2410c"];function u(){var e;let[t,s]=(0,i.useState)(null),[u,f]=(0,i.useState)(!0);if((0,i.useEffect)(()=>{fetch("/api/dashboard/stats").then(e=>e.json()).then(e=>{s(e),f(!1)}).catch(()=>f(!1))},[]),u)return(0,a.jsxs)("div",{className:"space-y-6 animate-in",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,a.jsx)("div",{className:"loading-skeleton h-32 rounded-2xl"},e))}),(0,a.jsx)("div",{className:"loading-skeleton h-80 rounded-2xl"})]});if(!t)return null;let j=[{title:"Ventas Hoy",value:h(t.ventasHoy.total),subtitle:"".concat(t.ventasHoy.pedidos," pedidos"),icon:(0,a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),(0,a.jsx)("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),color:"from-primary-500/20 to-primary-600/10",iconColor:"text-primary-400"},{title:"Ventas Totales",value:h(t.ventasTotal.total),subtitle:"".concat(t.ventasTotal.pedidos," pedidos hist\xf3ricos"),icon:(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),color:"from-emerald-500/20 to-emerald-600/10",iconColor:"text-emerald-400"},{title:"Ticket Promedio",value:t.ventasTotal.pedidos>0?h(t.ventasTotal.total/t.ventasTotal.pedidos):h(0),subtitle:"Valor promedio por pedido",icon:(0,a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2"}),(0,a.jsx)("line",{x1:"2",y1:"10",x2:"22",y2:"10"})]}),color:"from-blue-500/20 to-blue-600/10",iconColor:"text-blue-400"},{title:"Pedidos Pendientes",value:(null==(e=t.porEstado.find(e=>"pendiente"===e.estado))?void 0:e.cantidad)||"0",subtitle:"Requieren atenci\xf3n",icon:(0,a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),color:"from-amber-500/20 to-amber-600/10",iconColor:"text-amber-400"}],g=["Dom","Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b"],b=t.ventasSemana.map(e=>({dia:g[new Date(e.dia+"T12:00:00").getDay()],total:e.total,pedidos:e.pedidos}));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"animate-in",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-surface-50",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-surface-400 text-sm mt-1",children:"Resumen general de ventas y operaciones"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:j.map((e,t)=>(0,a.jsxs)("div",{className:"stat-card animate-in",style:{animationDelay:"".concat(80*t,"ms")},children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsx)("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br ".concat(e.color," flex items-center justify-center ").concat(e.iconColor),children:e.icon})}),(0,a.jsx)("p",{className:"text-2xl font-bold text-surface-50",children:e.value}),(0,a.jsx)("p",{className:"text-sm font-medium text-surface-400 mt-1",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-surface-500 mt-0.5",children:e.subtitle})]},t))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 glass-card p-6 animate-in",style:{animationDelay:"300ms"},children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-surface-100 mb-1",children:"Ventas \xdaltimos 7 D\xedas"}),(0,a.jsx)("p",{className:"text-xs text-surface-500 mb-6",children:"Ingresos diarios en COP"}),b.length>0?(0,a.jsx)(r.u,{width:"100%",height:280,children:(0,a.jsxs)(l.E,{data:b,children:[(0,a.jsx)(d.d,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.06)"}),(0,a.jsx)(c.W,{dataKey:"dia",stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1}),(0,a.jsx)(n.h,{stroke:"#64748b",fontSize:11,tickLine:!1,axisLine:!1,tickFormatter:e=>"$".concat((e/1e3).toFixed(0),"k")}),(0,a.jsx)(o.m,{contentStyle:{background:"rgba(15,23,42,0.95)",border:"1px solid rgba(148,163,184,0.1)",borderRadius:"12px",padding:"12px 16px",boxShadow:"0 8px 30px rgba(0,0,0,0.4)"},labelStyle:{color:"#e2e8f0",fontWeight:600,marginBottom:4},itemStyle:{color:"#94a3b8"},formatter:e=>[h(e),"Ventas"]}),(0,a.jsx)(x.y,{dataKey:"total",radius:[6,6,0,0],maxBarSize:40,children:b.map((e,t)=>(0,a.jsx)(m.f,{fill:p[t%p.length]},t))})]})}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-60 text-surface-500",children:[(0,a.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:"mb-3 text-surface-600",children:[(0,a.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),(0,a.jsx)("path",{d:"M3 9h18"}),(0,a.jsx)("path",{d:"M9 21V9"})]}),(0,a.jsx)("p",{className:"text-sm",children:"No hay datos de la \xfaltima semana"}),(0,a.jsx)("p",{className:"text-xs text-surface-600 mt-1",children:"Los datos aparecer\xe1n cuando se registren pedidos"})]})]}),(0,a.jsxs)("div",{className:"glass-card p-6 animate-in",style:{animationDelay:"400ms"},children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-surface-100 mb-1",children:"Ventas por Sede"}),(0,a.jsx)("p",{className:"text-xs text-surface-500 mb-6",children:"Rendimiento por ubicaci\xf3n"}),(0,a.jsx)("div",{className:"space-y-4",children:t.ventasPorSede.map((e,s)=>(0,a.jsxs)("div",{className:"glass-card-light p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-surface-200",children:e.sede}),(0,a.jsxs)("span",{className:"text-xs text-surface-500",children:[e.pedidos," pedidos"]})]}),(0,a.jsx)("p",{className:"text-lg font-bold text-primary-400",children:h(e.total)}),(0,a.jsx)("div",{className:"mt-2 h-1.5 rounded-full bg-surface-800 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-primary-500 to-primary-400 transition-all duration-500",style:{width:"".concat(t.ventasPorSede.length>0?Math.max(5,e.total/Math.max(...t.ventasPorSede.map(e=>e.total||1))*100):5,"%")}})})]},s))})]})]}),(0,a.jsxs)("div",{className:"glass-card p-6 animate-in",style:{animationDelay:"500ms"},children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-surface-100 mb-1",children:"Top Productos"}),(0,a.jsx)("p",{className:"text-xs text-surface-500 mb-6",children:"Productos m\xe1s vendidos"}),t.topProductos.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:t.topProductos.map((e,t)=>(0,a.jsxs)("div",{className:"glass-card-light p-4 text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 mx-auto rounded-xl bg-gradient-to-br from-primary-500/20 to-primary-600/10 flex items-center justify-center text-primary-400 font-bold text-lg mb-3",children:t+1}),(0,a.jsx)("p",{className:"text-sm font-medium text-surface-200 mb-1",children:e.nombre}),(0,a.jsxs)("p",{className:"text-xs text-surface-500",children:[e.vendido," vendidos"]}),(0,a.jsx)("p",{className:"text-sm font-bold text-primary-400 mt-1",children:h(e.ingreso)})]},t))}):(0,a.jsx)("div",{className:"text-center py-8 text-surface-500",children:(0,a.jsx)("p",{className:"text-sm",children:"Sin datos de productos vendidos a\xfan"})})]}),(0,a.jsxs)("div",{className:"glass-card p-6 animate-in",style:{animationDelay:"600ms"},children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-surface-100 mb-1",children:"Pedidos Recientes"}),(0,a.jsx)("p",{className:"text-xs text-surface-500 mb-6",children:"\xdaltimos 10 pedidos registrados"}),t.recientes.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-surface-800/50",children:[(0,a.jsx)("th",{className:"text-left text-xs font-medium text-surface-500 uppercase tracking-wider pb-3 px-4",children:"Ticket"}),(0,a.jsx)("th",{className:"text-left text-xs font-medium text-surface-500 uppercase tracking-wider pb-3 px-4",children:"Cliente"}),(0,a.jsx)("th",{className:"text-left text-xs font-medium text-surface-500 uppercase tracking-wider pb-3 px-4",children:"Sede"}),(0,a.jsx)("th",{className:"text-left text-xs font-medium text-surface-500 uppercase tracking-wider pb-3 px-4",children:"Estado"}),(0,a.jsx)("th",{className:"text-right text-xs font-medium text-surface-500 uppercase tracking-wider pb-3 px-4",children:"Total"}),(0,a.jsx)("th",{className:"text-right text-xs font-medium text-surface-500 uppercase tracking-wider pb-3 px-4",children:"Fecha"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-surface-800/30",children:t.recientes.map(e=>(0,a.jsxs)("tr",{className:"table-row",children:[(0,a.jsx)("td",{className:"py-3 px-4 text-sm font-medium text-surface-200",children:e.numero_ticket||"#".concat(e.id_pedido)}),(0,a.jsx)("td",{className:"py-3 px-4 text-sm text-surface-300",children:e.cliente_nombre||"—"}),(0,a.jsx)("td",{className:"py-3 px-4 text-sm text-surface-400",children:e.sede_nombre||"—"}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:"badge badge-".concat(e.estado),children:e.estado})}),(0,a.jsx)("td",{className:"py-3 px-4 text-sm font-semibold text-surface-200 text-right",children:h(parseFloat(e.total))}),(0,a.jsx)("td",{className:"py-3 px-4 text-sm text-surface-500 text-right",children:new Date(e.fecha).toLocaleDateString("es-CO",{day:"2-digit",month:"short"})})]},e.id_pedido))})]})}):(0,a.jsxs)("div",{className:"text-center py-12 text-surface-500",children:[(0,a.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:"mx-auto mb-3 text-surface-600",children:[(0,a.jsx)("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),(0,a.jsx)("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"})]}),(0,a.jsx)("p",{className:"text-sm",children:"No hay pedidos registrados"}),(0,a.jsx)("p",{className:"text-xs text-surface-600 mt-1",children:"Los pedidos nuevos aparecer\xe1n aqu\xed autom\xe1ticamente"})]})]})]})}}},e=>{e.O(0,[930,441,255,358],()=>e(e.s=46642)),_N_E=e.O()}]);