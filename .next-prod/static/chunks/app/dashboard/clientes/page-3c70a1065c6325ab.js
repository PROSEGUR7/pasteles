(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[641],{30290:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(95155),r=s(12115);function l(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null),d=async()=>{try{l(!0);let e=await fetch("/api/clientes",{cache:"no-store"});if(!e.ok)throw Error("No se pudieron cargar los clientes");let s=await e.json();t(s.clientes||[]),c(null)}catch(e){console.error("[Clientes] Error",e),c("No pudimos cargar los clientes")}finally{l(!1)}};return(0,r.useEffect)(()=>{d()},[]),(0,a.jsxs)("div",{className:"space-y-6 animate-in",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-surface-50",children:"Clientes"}),(0,a.jsx)("p",{className:"text-surface-400 text-sm mt-1",children:"Listado de clientes registrados en la base de datos."})]}),(0,a.jsx)("button",{onClick:d,disabled:s,className:"px-3 py-2 rounded-md text-xs border ".concat(s?"border-surface-800/20 text-surface-500 cursor-not-allowed":"border-surface-800/30 text-surface-300 hover:text-surface-50"),children:"Actualizar"})]}),(0,a.jsxs)("div",{className:"glass-card overflow-hidden",children:[i&&(0,a.jsx)("div",{className:"px-5 py-3 text-xs text-primary-600 bg-primary-500/10 border-b border-primary-500/20",children:i}),s?(0,a.jsx)("div",{className:"p-6 text-sm text-surface-400",children:"Cargando clientes..."}):0===e.length?(0,a.jsx)("div",{className:"p-6 text-sm text-surface-400",children:"No hay clientes para mostrar."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-[11px] uppercase tracking-[0.2em] text-surface-500 border-b border-surface-800/20",children:[(0,a.jsx)("th",{className:"text-left font-medium px-5 py-3",children:"Cliente"}),(0,a.jsx)("th",{className:"text-left font-medium px-5 py-3",children:"Tel\xe9fono"}),(0,a.jsx)("th",{className:"text-left font-medium px-5 py-3",children:"Pedidos"}),(0,a.jsx)("th",{className:"text-left font-medium px-5 py-3",children:"\xdaltimo pedido"}),(0,a.jsx)("th",{className:"text-right font-medium px-5 py-3",children:"Estado"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-b border-surface-800/15 last:border-b-0",children:[(0,a.jsx)("td",{className:"px-5 py-3 text-surface-100 font-semibold",children:e.nombre||"Sin nombre"}),(0,a.jsx)("td",{className:"px-5 py-3 text-surface-400",children:e.telefono||"â€”"}),(0,a.jsx)("td",{className:"px-5 py-3 text-surface-300",children:e.totalPedidos}),(0,a.jsx)("td",{className:"px-5 py-3 text-surface-300",children:function(e){if(!e)return"Sin pedidos";let t=new Date(e);if(Number.isNaN(t.getTime()))return"Sin pedidos";let s=new Date,a=s.getTime()-t.getTime();return a<864e5&&t.getDate()===s.getDate()?t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):a<1728e5?"ayer":t.toLocaleDateString("es-ES",{day:"2-digit",month:"short"})}(e.ultimoPedido)}),(0,a.jsx)("td",{className:"px-5 py-3 text-right",children:(0,a.jsx)("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold ".concat(e.pedidosCancelados>0?"bg-amber-500/15 text-amber-600":"bg-emerald-500/15 text-emerald-700"),children:e.pedidosCancelados>0?"".concat(e.pedidosCancelados," cancelados"):"Sin cancelaciones"})})]},e.id))})]})})]})]})}},61063:(e,t,s)=>{Promise.resolve().then(s.bind(s,30290))}},e=>{e.O(0,[441,255,358],()=>e(e.s=61063)),_N_E=e.O()}]);